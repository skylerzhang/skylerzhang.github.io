---
layout: none
title: 北京节能环保促进会
permalink: /h5/
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport"
        content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
  <title>北京节能环保促进会</title>
  <link href="/assets/h5/public/css/iSlider.css" rel="stylesheet">
  <link href="/assets/h5/main.css" rel="stylesheet">
  <link href="/assets/h5/animate.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #333;
      overflow: hidden;
    }

    /*ul wrapper*/
    #iSlider-wrapper {
      height: 100%;
      width: 100%;
      overflow: hidden;
      position: absolute;
    }

    #iSlider-wrapper ul {
      list-style: none;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    #iSlider-wrapper li {
      position: absolute;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      display: -webkit-box;
      -webkit-box-pack: center;
      -webkit-box-align: center;
      list-style: none;
    }

    #iSlider-wrapper li img {
      max-width: 100%;
      max-height: 100%;
    }
  </style>
</head>
<body>
<div id="iSlider-wrapper"></div>
<div id="hidden-space0" style="display:none">
  <div class="slide-one-wrap">
    <div class="slide-basic slide-one">
      <div class="slide-one-content">
        <!--<div class="slide-one-people6 animated no-opacity"></div>-->
        <!--<div class="slide-one-people7 animated no-opacity"></div>-->
        <div class="slide-one-new-people1" style="display: none"></div>
        <div class="slide-one-people1 animated">
          <div class="renwu-tanqi" style="display: none"></div>
        </div>
      </div>
      <div class="slide-one-footer"></div>
    </div>
    <div class="loading">
      <div class="loading-rotate-full"></div>
    </div>
    <div class="arrow arrow1"></div>
  </div>
</div>
<div id="hidden-space1" style="display:none">
  <div class="slide-two-wrap">
    <div class="slide-basic slide-two">
      <div class="slide-two-env">
        <div class="room-night no-opacity">
          <div class="slide-basic room-night-content"></div>
        </div>
        <div class="ammeter">
          <div class="ammeter_basic ammeter_5"></div>
          <div class="ammeter_basic ammeter_4"></div>
          <div class="ammeter_basic ammeter_3"></div>
          <div class="ammeter_basic ammeter_2"></div>
          <div class="ammeter_basic ammeter_1"></div>
        </div>
        <div class="air-conditioner-close"></div>
        <div class="air-conditioner animated faster">
          <div class="air-conditioner-tips animated shake infinite" style="display: none"></div>
        </div>
        <div class="projection-close"></div>
        <div class="projection animated faster">
          <div class="projection-tips animated shake infinite" style="display: none"></div>
        </div>
        <div class="computer-close"></div>
        <div class="computer animated faster">
          <div class="computer-tips animated shake infinite" style="display: none"></div>
        </div>
        <div class="background animated"></div>
      </div>
    </div>
    <div class="slide-two-door"></div>
    <div class="animated slide-two-people"></div>
    <div class="mask"></div>
    <div class="plug-bg no-opacity animated">
      <div class="plug"></div>
    </div>
    <div class="plug-bg-out no-opacity">
      <div class="plug-out"></div>
    </div>
    <div class="room-night" style="display: none">
      <div class="slide-basic room-night-content"></div>
    </div>
    <div class="animated ammeter-copy-bg">
      <div class="ammeter-copy"></div>
      <div class="ammeter-copy2 no-opacity"></div>
    </div>
    <div class="animated switch-bg">
      <div class="switch-bg-close no-opacity"></div>
      <div class="switch-close no-opacity"></div>
      <div class="switch"></div>
    </div>
    <div class="arrow arrow2"></div>
  </div>
</div>
<div id="hidden-space2" style="display:none">
  <div class="slide-three-wrap">
    <div class="floor-board-bg slide-basic">
      <div class="floor-board"></div>
      <div class="ceiling"></div>
      <div class="light light1 animated"></div>
      <div class="light light2 animated"></div>
      <div class="lamp lamp2"></div>
      <div class="lamp lamp1 animated"></div>
      <div class="door door3"></div>
      <div class="door door2 animated"></div>
      <div class="door door1 animated"></div>
      <!--<div class="animated slide-three-people1"></div>-->
      <div class="slide-three-new-people1"></div>
      <div class="slide-three-new-people2 no-opacity"></div>
      <div class="slide-three-new-people3 no-opacity"></div>
      <div class="slide-three-new-people4 no-opacity"></div>
      <div class="slide-three-new-people5 no-opacity"></div>
      <div class="slide-three-new-people6 no-opacity"></div>
      <div class="slide-three-new-people7 no-opacity"></div>
      <div class="slide-three-new-people8 no-opacity"></div>
      <div class="slide-three-new-people9 no-opacity"></div>
      <div class="slide-three-new-people10 no-opacity"></div>
      <div class="slide-three-new-people11 no-opacity"></div>
      <div class="slide-three-new-people12 no-opacity"></div>
      <div class="slide-three-new-people13 no-opacity"></div>
      <div class="slide-three-new-people14 no-opacity"></div>
      <div class="slide-three-new-people15 no-opacity"></div>
      <div class="slide-three-new-people16 no-opacity"></div>
      <div class="slide-three-new-people17 no-opacity"></div>
      <div class="slide-three-new-people18 no-opacity"></div>
      <div class="slide-three-new-people19 no-opacity"></div>
      <div class="slide-three-new-people20 no-opacity"></div>
      <!--<div class="animated slide-three-people2 no-opacity"></div>-->
      <!--<div class="animated slide-three-people3 no-opacity"></div>-->
      <!--<div class="animated slide-three-people4 no-opacity"></div>-->
    </div>
    <div class="slide-three-mask animated">
      <div class="slide-three-text1" style="display: none">
        <div class="slide-three-text-mask slide-three-text-mask1 animated"></div>
      </div>
      <div class="slide-three-text2" style="display: none">
        <div class="slide-three-text-mask slide-three-text-mask2 animated"></div>
      </div>
      <div class="slide-three-text3" style="display: none">
        <div class="slide-three-text-mask slide-three-text-mask3 animated"></div>
      </div>
      <div class="slide-three-text4" style="display: none">
        <div class="slide-three-text-mask slide-three-text-mask4 animated"></div>
      </div>
    </div>
    <div class="arrow arrow3"></div>
  </div>
</div>
<div id="hidden-space3" style="display:none">
  <div class="sky">
    <div class="cloud"></div>
    <div class="grass"></div>
    <div class="slide-four-text1" style="display: none">
      <!--<div class="slide-three-text-mask slide-four-text-mask1 animated faster"></div>-->
    </div>
    <div class="slide-four-text2" style="display: none">
      <!--<div class="slide-three-text-mask slide-four-text-mask2 animated faster"></div>-->
    </div>
    <div class="slide-four-text3" style="display: none">
      <!--<div class="slide-three-text-mask slide-four-text-mask3 animated faster"></div>-->
    </div>
    <div class="slide-four-text4" style="display: none">
      <!--<div class="slide-three-text-mask slide-four-text-mask4 animated faster"></div>-->
    </div>
    <div class="qrcode animated" style="display: none">
      <img class="qrcode-img" src="http://app.billionconnect.com/h5/imgs/5/er_wei_ma.png">
    </div>
  </div>
</div>
<script type="text/javascript" src="/assets/h5/public/js/iSlider.js"></script>
<script type="text/javascript" src="/assets/h5/public/js/iSlider.animate.js"></script>
<script type="text/javascript" src="/assets/h5/public/zepto.js"></script>
<script>
  var list = [
    {
      content: document.querySelector('#hidden-space0 > div')
    },
    {
      content: document.querySelector('#hidden-space1 > div')
    },
    {
      content: document.querySelector('#hidden-space2 > div')
    },
    {
      content: document.querySelector('#hidden-space3 > div')
    },
  ];

  var S = new iSlider({
    dom: document.getElementById('iSlider-wrapper'),
    data: list,
    isAutoplay: 0,
    isLooping: 0,
    isOverspread: 0,
    animateTime: 500,
    isVertical: true,
    fixPage: ['.air-conditioner-tips', '.projection-tips', '.computer-tips', '.plug', '.switch', '.qrcode-img']
  });

  function preloadImg(list,imgs) {
    var def = $.Deferred(),
      len = list.length;
    $(list).each(function(i,e) {
      var img = new Image();
      img.src = e;
      if(img.complete) {
        imgs[i] = img;
        len--;
        if(len == 0) {
          def.resolve();
        }
      }
      else {
        img.onload = (function(j) {
          return function() {
            imgs[j] = img
            len--;
            if(len == 0) {
              def.resolve();
            }
          };
        })(i);
        img.onerror = function() {
          len--;
          console.log('fail to load image');
        };
      }
    });
    return def.promise();
  }

</script>
<script>
  var animationEnd = (function(el) {
    var animations = {
      animation: 'animationend',
      OAnimation: 'oAnimationEnd',
      MozAnimation: 'mozAnimationEnd',
      WebkitAnimation: 'webkitAnimationEnd',
    };

    for (var t in animations) {
      if (el.style[t] !== undefined) {
        return animations[t];
      }
    }
  })(document.createElement('div'));

  var sWidth = $(window).width()

  if (sWidth === 360) {
    $('.slide-two-door').css('background', 'none')
  }

  S.on('slideChanged', function (num) {
    switch (num) {
      case 0:
        sliderOneAnimate()
        break
      case 1:
        sliderTwoAnimate()
        break
      case 2:
        sliderThreeAnimate()
        break
      case 3:
        sliderFourAnimate()
        break
      default :
        break
    }

  });

  var list = [
    'http://app.billionconnect.com/h5/imgs/1/yue_tiankong.png',
    'http://app.billionconnect.com/h5/imgs/1/loufang.png',
    'http://app.billionconnect.com/h5/imgs/1/renwu_1.png',
    'http://app.billionconnect.com/h5/imgs/1/renwu_2.png',
    'http://app.billionconnect.com/h5/imgs/1/renwu_3.png',
    // 'http://app.billionconnect.com/h5/imgs/1/renwu_6.png',
    // 'http://app.billionconnect.com/h5/imgs/1/renwu_7.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people1.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people2.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people3.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people4.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people5.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people6.png',
    'http://app.billionconnect.com/h5/imgs/1new/1_new_people7.png',
    'http://app.billionconnect.com/h5/imgs/1new/tanqi_qiti.png',
    'http://app.billionconnect.com/h5/imgs/1new/renwu_tanqi.png',
    'http://app.billionconnect.com/h5/imgs/1/xia_dimian.png',
    'http://app.billionconnect.com/h5/imgs/slider-one-wrap-bg.png'
    ],    //此处省略一万个字符
    imgs = [];
  $.when(preloadImg(list, imgs)).done(
    function() {
      $('.loading').hide()
      sliderOneAnimate()
    }
  );

  // 第一屏动画
  function sliderOneAnimate(){
    var $slideOnePeople1 = $('.slide-one-people1')
    // var $slideOnePeople6 = $('.slide-one-people6')
    // var $slideOnePeople7 = $('.slide-one-people7')
    var $slideOneNewPeople1 = $('.slide-one-new-people1')
    var $renwuTanqi = $('.renwu-tanqi')
    var $arrow1 = $('.arrow1')
    var i = 1
    var j = 1
    var timer1 = null
    function people () {
      $slideOnePeople1.addClass('slide-one-people' + i)
      i++
      if (i >= 7) {
        clearInterval(timer)
        $renwuTanqi.show()
        i = 1
        $slideOnePeople1.addClass('fadeOut')
        $slideOnePeople1.one(animationEnd, function () {
          $slideOneNewPeople1.show()
          timer1 = setInterval(people2, 300)
        })
        // $slideOnePeople6.addClass('fadeIn')
        // $slideOnePeople6.one(animationEnd, function () {
        //   // $slideOnePeople6.hide()
        //   // $slideOnePeople7.addClass('fadeIn')
        //   $slideOnePeople7.one(animationEnd, function () {
        //     // $slideOnePeople7.addClass('fadeOut faster')
        //     $arrow1.show()
        //   })
        // })
      }
    }
    function people2 () {
      $slideOneNewPeople1.addClass('slide-one-new-people' + j)
      j++
      if (j >= 8) {
        clearInterval(timer1)
        j = 1
        $slideOneNewPeople1.hide()
        $arrow1.show()
      }
    }
    people()
    var timer = setInterval(people, 400)
  }

  function sliderTwoAnimate () {
    // 第二屏动画
    var $slideTwoPeople = $('.slide-two-people')
    var $airConditionerTips = $('.air-conditioner-tips')
    var $airConditioner = $('.air-conditioner')
    var $projection = $('.projection')
    var $projectionTips = $('.projection-tips')
    var $background = $('.background')
    var $computerTips = $('.computer-tips')
    var $computer = $('.computer')
    var $plugBg = $('.plug-bg')
    var $plugBgOut = $('.plug-bg-out')
    var $mask = $('.mask')
    var $plug = $('.plug')
    var $switchBg = $('.switch-bg')
    var $switch = $('.switch')
    var $roomNight = $('.room-night')
    var $arrow2 = $('.arrow2')
    var $ammeter1 = $('.ammeter_1')
    var $ammeter2 = $('.ammeter_2')
    var $ammeter3 = $('.ammeter_3')
    var $ammeter4 = $('.ammeter_4')
    var $ammeter5 = $('.ammeter_5')
    var $ammeterCopyBg = $('.ammeter-copy-bg')
    var $ammeterCopy2 = $('.ammeter-copy2')
    $slideTwoPeople.addClass('fadeInUp');
    $slideTwoPeople.one(animationEnd, function () {
      $airConditionerTips.show()
    })

    $airConditionerTips.one('click', function () {
      $airConditioner.addClass('fadeOut')
      $airConditionerTips.hide()
      $ammeter1.hide()
      $projectionTips.show()
    })
    $projectionTips.one('click', function () {
      $projection.addClass('fadeOut')
      $background.addClass('fadeOut')
      $projectionTips.hide()
      $ammeter2.hide()
      $computerTips.show()
    })
    $computerTips.one('click', function () {
      $computer.addClass('fadeOut')
      $computerTips.hide()
      $ammeter3.hide()
      $computer.one(animationEnd, function () {
        $plugBg.removeClass('no-opacity').css('z-index', 2)
        $plugBgOut.removeClass('no-opacity').css('z-index', 1)
        $mask.show()
      })
    })
    $plug.one('click', function () {
      $plugBg.addClass('fadeOut')
      $ammeter4.hide()
      // $plug.addClass('plug-out')
      $plugBg.one(animationEnd, function () {
        setTimeout(function() {
          $plugBgOut.hide()
          $mask.hide()
          $switchBg.addClass('fadeInUp')
          $ammeterCopyBg.addClass('fadeInDown')
        }, 500)
      })
    })
    $switchBg.one('click', function () {
      $switchBg.addClass('switch-bg-close')
      $ammeterCopyBg.addClass('ammeter-copy-bg-close')
      $ammeterCopy2.css('opacity', 1)
      $switch.addClass('switch-close')
      $roomNight.show()
      $arrow2.show()
      // S.slideTo(2)
    })

  }
  // 还原第二屏动画
  // function resetSliderOneAnimate () {
  //   $slideTwoPeople.removeClass('fadeInUp')
  //   $airConditionerTips.hide()
  //   $projectionTips.hide()
  //   $computerTips.hide()
  //   $airConditioner.removeClass('air-conditioner-close')
  //   $projection.removeClass('projection-close')
  //   $computer.removeClass('computer-close')
  //
  // }

  // 第三屏动画

  function sliderThreeAnimate () {
    // var $slideThreePeople1 = $('.slide-three-people1')
    // var $slideThreePeople2 = $('.slide-three-people2')
    // var $slideThreePeople3 = $('.slide-three-people3')
    // var $slideThreePeople4 = $('.slide-three-people4')
    var $light1 = $('.light1')
    var $light2 = $('.light2')
    var $lamp1 = $('.lamp1')
    var $door1 = $('.door1')
    var $door2 = $('.door2')
    var $slideThreeMask = $('.slide-three-mask')
    var $slideThreeText1 = $('.slide-three-text1')
    var $slideThreeText2 = $('.slide-three-text2')
    var $slideThreeText3 = $('.slide-three-text3')
    var $slideThreeText4 = $('.slide-three-text4')
    var $slideThreeTextMask1 = $('.slide-three-text-mask1')
    var $slideThreeTextMask2 = $('.slide-three-text-mask2')
    var $slideThreeTextMask3 = $('.slide-three-text-mask3')
    var $slideThreeTextMask4 = $('.slide-three-text-mask4')
    var $slideThreeNewPeople1 = $('.slide-three-new-people1')
    var $arrow3 = $('.arrow3')
    // $slideThreePeople1.addClass('fadeInUp')
    // $slideThreePeople1.one(animationEnd, function () {
    //   $slideThreePeople1.hide()
    //   $slideThreePeople2.addClass('fadeIn')
    //   $slideThreePeople2.one(animationEnd, function () {
    //     $slideThreePeople2.hide()
    //     $slideThreePeople3.addClass('fadeIn')
    //     $light1.addClass('fadeOut')
    //     $slideThreePeople3.one(animationEnd, function () {
    //       $light2.addClass('fadeOut')
    //       $slideThreePeople3.hide()
    //       $slideThreePeople4.addClass('fadeIn')
    //       $light2.one(animationEnd, function () {
    //         $lamp1.addClass('fadeOut')
    //         $door1.addClass('fadeOut')
    //         $slideThreePeople4.hide()
    //         $door1.one(animationEnd, function () {
    //           $door2.addClass('fadeOut')
    //           $door2.one(animationEnd, function () {
    //             mask()
    //           })
    //         })
    //       })
    //     })
    //   })
    // })

    var timerThree = null
    var i = 1
    timerThree = setInterval(function () {
      $slideThreeNewPeople1.addClass('slide-three-new-people' + (i+1))
      i++
      if (i === 10) {
        $light1.addClass('fadeOut')
      }
      if (i === 15) {
        $light2.addClass('fadeOut')
      }
      if (i >= 20) {
        clearInterval(timerThree)
        $slideThreeNewPeople1.hide()
        $lamp1.addClass('fadeOut')
        $door1.addClass('fadeOut')
        $door1.one(animationEnd, function () {
          $door2.addClass('fadeOut')
          $door2.one(animationEnd, function () {
            mask()
          })
        })

      }
    }, 300)

    function mask () {
      $slideThreeMask.addClass('fadeIn')
      $slideThreeMask.one(animationEnd, function () {
        $slideThreeText1.show()
        $slideThreeTextMask1.addClass('fadeIn')
        setTimeout(function () {
          $slideThreeText2.show()
          $slideThreeTextMask2.addClass('fadeIn')
        }, 1000)
        setTimeout(function () {
          $slideThreeText3.show()
          $slideThreeTextMask3.addClass('fadeIn')
        }, 2000)
        setTimeout(function () {
          $slideThreeText4.show()
          $slideThreeTextMask4.addClass('fadeIn')
          $arrow3.show()
          // S.slideTo(3)
        }, 3000)
      })
    }
  }

  function sliderFourAnimate() {
    var $slideFourText1 = $('.slide-four-text1')
    var $slideFourText2 = $('.slide-four-text2')
    var $slideFourText3 = $('.slide-four-text3')
    var $slideFourText4 = $('.slide-four-text4')
    var $slideFourTextMask1 = $('.slide-four-text-mask1')
    var $slideFourTextMask2 = $('.slide-four-text-mask2')
    var $slideFourTextMask3 = $('.slide-four-text-mask3')
    var $slideFourTextMask4 = $('.slide-four-text-mask4')
    $slideFourText1.show()
    // $slideFourTextMask1.addClass('fadeIn')
    setTimeout(function () {
      $slideFourText2.show()
      // $slideFourTextMask2.addClass('fadeIn')
    }, 1000)
    setTimeout(function () {
      $slideFourText3.show()
      // $slideFourTextMask3.addClass('fadeIn')
    }, 2000)
    setTimeout(function () {
      $slideFourText4.show()
      // $slideFourTextMask4.addClass('fadeIn')
      $('.qrcode').show().addClass('tada')
    }, 3000)
  }

</script>
</body>
</html>
